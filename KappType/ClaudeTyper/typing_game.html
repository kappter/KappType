<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Fall - Typing Game</title>
    <style>
        /* CSS Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #121212;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .app-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            color: white;
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .app-header h1 {
            font-size: 24px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 0;
        }
        
        .app-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            color: #999;
            padding: 10px 0;
            text-align: center;
            font-size: 12px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .game-container {
            width: 800px;
            max-width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 70px;
            margin-bottom: 50px;
            padding: 0 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #2c2c2c;
            border-radius: 10px;
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4caf50;
        }
        
        .game-area {
            position: relative;
            width: 100%;
            height: 400px;
            background-color: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #333;
            margin: 0 auto;
        }
        
        .word {
            position: absolute;
            color: white;
            font-size: 20px;
            padding: 5px 10px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 5px;
            transition: top 0.1s linear;
        }
        
        .word.active {
            color: #ffeb3b;
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid #ffeb3b;
        }
        
        .word.correct {
            color: #4caf50;
            animation: fadeOut 0.5s forwards;
        }
        
        .typed-correct {
            color: #ff5252 !important;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(1.2);
            }
        }
        
        .game-info {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            width: 80%;
        }
        
        .typing-area {
            position: relative;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        #typing-input {
            width: 100%;
            padding: 10px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        #typing-input:focus {
            outline: none;
            border: 1px solid #4caf50;
        }
        
        .wave-info {
            text-align: center;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .wave-number {
            color: #4caf50;
            font-weight: bold;
        }
        
        .keyboard {
            width: 100%;
            margin: 0 auto;
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 5px;
        }
        
        .key {
            width: 40px;
            height: 40px;
            background-color: #333;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 2px;
            font-size: 14px;
            user-select: none;
            transition: all 0.1s;
        }
        
        .key.active {
            background-color: #4caf50;
            color: black;
            transform: translateY(2px);
        }
        
        .key.space {
            width: 200px;
        }
        
        .key.wide {
            width: 60px;
        }
        
        .key.wider {
            width: 80px;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 10px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #4caf50;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .difficulty-btn {
            padding: 5px 15px;
            background-color: #333;
        }
        
        .difficulty-btn.active {
            background-color: #4caf50;
        }
        
        .certificate-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            align-items: center;
            justify-content: center;
        }
        
        .certificate-form {
            background-color: #2c2c2c;
            padding: 20px;
            border-radius: 10px;
            width: 400px;
            max-width: 90%;
        }
        
        .certificate-form h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #555;
            border-radius: 5px;
            background-color: #333;
            color: white;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        @media (max-width: 850px) {
            .game-container {
                width: 100%;
            }
            
            .key {
                width: 30px;
                height: 30px;
                font-size: 12px;
            }
            
            .key.space {
                width: 150px;
            }
            
            .key.wide {
                width: 45px;
            }
            
            .key.wider {
                width: 60px;
            }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <h1>Word Fall Typing Game</h1>
    </header>
    
    <div class="game-container">
        <div class="header">
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Accuracy</div>
                    <div class="stat-value" id="accuracy">100%</div>
                </div>
                <div class="stat">
                    <div class="stat-label">WPM</div>
                    <div class="stat-value" id="wpm">0</div>
                </div>
            </div>
            <div class="timer" id="timer">0:30</div>
        </div>
        
        <div class="wave-info">
            Wave <span class="wave-number" id="wave-number">1</span>
            <span id="wave-timer">0:30</span>
        </div>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" data-difficulty="easy">Easy</button>
            <button class="difficulty-btn" data-difficulty="medium">Medium</button>
            <button class="difficulty-btn" data-difficulty="hard">Hard</button>
        </div>
        
        <div class="game-area" id="game-area">
            <div class="game-info" id="game-info">
                <h2>Word Fall Typing Game</h2>
                <p>Type the falling words before they reach the bottom!</p>
                <p>Words get faster with each wave</p>
                <button id="start-btn">Start Game</button>
            </div>
        </div>
        
        <div class="typing-area">
            <input type="text" id="typing-input" placeholder="Type here..." autocomplete="off" disabled>
        </div>
        
        <div class="keyboard" id="keyboard">
            <div class="keyboard-row">
                <div class="key" data-key="`">~<br>`</div>
                <div class="key" data-key="1">!<br>1</div>
                <div class="key" data-key="2">@<br>2</div>
                <div class="key" data-key="3">#<br>3</div>
                <div class="key" data-key="4">$<br>4</div>
                <div class="key" data-key="5">%<br>5</div>
                <div class="key" data-key="6">^<br>6</div>
                <div class="key" data-key="7">&<br>7</div>
                <div class="key" data-key="8">*<br>8</div>
                <div class="key" data-key="9">(<br>9</div>
                <div class="key" data-key="0">)<br>0</div>
                <div class="key" data-key="-">_<br>-</div>
                <div class="key" data-key="="">+<br>=</div>
                <div class="key wider" data-key="Backspace">Backspace</div>
            </div>
            <div class="keyboard-row">
                <div class="key wide" data-key="Tab">Tab</div>
                <div class="key" data-key="q">Q</div>
                <div class="key" data-key="w">W</div>
                <div class="key" data-key="e">E</div>
                <div class="key" data-key="r">R</div>
                <div class="key" data-key="t">T</div>
                <div class="key" data-key="y">Y</div>
                <div class="key" data-key="u">U</div>
                <div class="key" data-key="i">I</div>
                <div class="key" data-key="o">O</div>
                <div class="key" data-key="p">P</div>
                <div class="key" data-key="[">{<br>[</div>
                <div class="key" data-key="]">}<br>]</div>
                <div class="key" data-key="\\">|<br>\</div>
            </div>
            <div class="keyboard-row">
                <div class="key wider" data-key="CapsLock">Caps</div>
                <div class="key" data-key="a">A</div>
                <div class="key" data-key="s">S</div>
                <div class="key" data-key="d">D</div>
                <div class="key" data-key="f">F</div>
                <div class="key" data-key="g">G</div>
                <div class="key" data-key="h">H</div>
                <div class="key" data-key="j">J</div>
                <div class="key" data-key="k">K</div>
                <div class="key" data-key="l">L</div>
                <div class="key" data-key=";">:<br>;</div>
                <div class="key" data-key="'">"<br>'</div>
                <div class="key wider" data-key="Enter">Enter</div>
            </div>
            <div class="keyboard-row">
                <div class="key wider" data-key="Shift">Shift</div>
                <div class="key" data-key="z">Z</div>
                <div class="key" data-key="x">X</div>
                <div class="key" data-key="c">C</div>
                <div class="key" data-key="v">V</div>
                <div class="key" data-key="b">B</div>
                <div class="key" data-key="n">N</div>
                <div class="key" data-key="m">M</div>
                <div class="key" data-key=",">&lt;<br>,</div>
                <div class="key" data-key=".">><br>.</div>
                <div class="key" data-key="/">\?<br>/</div>
                <div class="key wider" data-key="Shift">Shift</div>
            </div>
            <div class="keyboard-row">
                <div class="key" data-key="Control">Ctrl</div>
                <div class="key" data-key="Meta">Win</div>
                <div class="key" data-key="Alt">Alt</div>
                <div class="key space" data-key=" ">Space</div>
                <div class="key" data-key="Alt">Alt</div>
                <div class="key" data-key="Meta">Win</div>
                <div class="key" data-key="Control">Ctrl</div>
            </div>
        </div>
        
        <div class="controls">
            <button id="reset-btn" disabled>Reset Game</button>
            <button id="pause-btn" disabled>Pause</button>
            <button id="certificate-btn" disabled>Get Certificate</button>
        </div>
    </div>
    
    <div class="certificate-modal" id="certificate-modal">
        <div class="certificate-form">
            <h2>Get Your Certificate</h2>
            <div class="form-group">
                <label for="player-name">Enter Your Name:</label>
                <input type="text" id="player-name" placeholder="Your Name">
            </div>
            <div class="modal-buttons">
                <button id="cancel-certificate">Cancel</button>
                <button id="download-certificate">Download Certificate</button>
            </div>
        </div>
    </div>
    
    <footer class="app-footer">
        <p>© 2025 Word Fall Typing Game | Improve your typing speed and accuracy</p>
    </footer>

    <script>
        // Word Data (CSV format will be loaded)
        const dummyWordData = {
            "two_letter": ["to", "at", "in", "on", "it", "is", "be", "as", "we", "he", "no", "by", "or", "if", "so", "do", "go", "up", "my", "me"],
            "three_letter": ["the", "and", "for", "are", "but", "not", "you", "all", "any", "can", "had", "her", "was", "one", "our", "out", "day", "get", "has", "him"],
            "four_letter": ["that", "with", "have", "this", "will", "your", "from", "they", "know", "want", "been", "good", "much", "some", "time", "very", "when", "come", "here", "just"],
            "five_letter": ["about", "where", "after", "think", "first", "would", "these", "there", "could", "right", "world", "their", "other", "state", "which", "people", "being", "great", "every", "never"],
            "six_letter": ["should", "before", "around", "little", "always", "though", "through", "something", "nothing", "between", "number", "system", "course", "family", "really", "trying", "making", "matter", "public", "during"],
            "seven_letter": ["because", "through", "government", "however", "looking", "problem", "country", "against", "provide", "general", "working", "different", "important", "national", "together", "business", "possible", "without", "children", "political"],
            "hyphenated": ["well-being", "co-worker", "self-made", "in-depth", "up-to-date", "one-time", "check-in", "day-to-day", "face-to-face", "life-size", "long-term", "mother-in-law", "out-of-date", "know-how", "user-friendly", "word-of-mouth", "x-ray", "T-shirt", "cross-reference", "off-the-record"],
            "mixed": ["@home", "#trending", "2day", "b4", "gr8", "w/out", "e-mail", "i.e.", "etc.", "3D", "24/7", "A1", "no.1", "100%", "c/o", "FAQ", "DIY", "ASAP", "P.S.", "N/A"]
        };

        // Game state
        let gameState = {
            score: 0,
            wave: 1,
            waveTime: 30, // 30 seconds per wave
            gameActive: false,
            gamePaused: false,
            words: [],
            activeWordIndex: -1,
            wpm: 0,
            accuracy: 100,
            correctWords: 0,
            totalWords: 0,
            intervalId: null,
            wordGeneratorId: null,
            fallingSpeedBase: 1,
            difficultyLevel: 'easy',
            difficultySettings: {
                easy: {
                    baseSpeed: 0.5,
                    speedIncrease: 0.1,
                    wordFrequency: 2000,
                    wordFrequencyDecrease: 200
                },
                medium: {
                    baseSpeed: 0.8,
                    speedIncrease: 0.15,
                    wordFrequency: 1500,
                    wordFrequencyDecrease: 150
                },
                hard: {
                    baseSpeed: 1.2,
                    speedIncrease: 0.2,
                    wordFrequency: 1000,
                    wordFrequencyDecrease: 100
                }
            },
            keyPresses: {
                total: 0,
                correct: 0
            }
        };

        // DOM elements
        const gameArea = document.getElementById('game-area');
        const gameInfo = document.getElementById('game-info');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const typingInput = document.getElementById('typing-input');
        const scoreDisplay = document.getElementById('score');
        const accuracyDisplay = document.getElementById('accuracy');
        const wpmDisplay = document.getElementById('wpm');
        const timerDisplay = document.getElementById('timer');
        const waveNumberDisplay = document.getElementById('wave-number');
        const waveTimerDisplay = document.getElementById('wave-timer');
        const difficultyButtons = document.querySelectorAll('.difficulty-btn');
        const keyboard = document.getElementById('keyboard');
        const keys = document.querySelectorAll('.key');

        // Load word data from CSV
        async function loadWordData() {
            try {
                // In a real implementation, we would fetch the CSV file
                // For this example, we'll use the dummy data
                // const response = await fetch('words.csv');
                // const csv = await response.text();
                // Process CSV data here
                
                return dummyWordData;
            } catch (error) {
                console.error("Error loading word data:", error);
                return dummyWordData; // Fallback to dummy data
            }
        }

        // Format time display (mm:ss)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        // Create a word element
        function createWordElement(word) {
            const wordElement = document.createElement('div');
            wordElement.className = 'word';
            wordElement.textContent = word;
            
            // Random position horizontally
            const maxLeft = gameArea.clientWidth - 150;
            const left = Math.floor(Math.random() * maxLeft);
            
            wordElement.style.left = `${left}px`;
            wordElement.style.top = '0px';
            
            gameArea.appendChild(wordElement);
            
            return wordElement;
        }

        // Get a random word based on the current wave
        function getRandomWord(wordData, wave) {
            let category;
            
            // Determine which category to choose from based on wave number
            if (wave <= 3) {
                const simpleCategories = ["two_letter", "three_letter", "four_letter"];
                category = simpleCategories[Math.floor(Math.random() * simpleCategories.length)];
            } else if (wave <= 6) {
                const mediumCategories = ["three_letter", "four_letter", "five_letter"];
                category = mediumCategories[Math.floor(Math.random() * mediumCategories.length)];
            } else if (wave <= 9) {
                const advancedCategories = ["four_letter", "five_letter", "six_letter"];
                category = advancedCategories[Math.floor(Math.random() * advancedCategories.length)];
            } else {
                const expertCategories = ["five_letter", "six_letter", "seven_letter", "hyphenated", "mixed"];
                category = expertCategories[Math.floor(Math.random() * expertCategories.length)];
            }
            
            const wordArray = wordData[category];
            return wordArray[Math.floor(Math.random() * wordArray.length)];
        }

        // Animate words falling
        function animateWords() {
            if (!gameState.gameActive || gameState.gamePaused) return;
            
            const difficulty = gameState.difficultySettings[gameState.difficultyLevel];
            const speed = difficulty.baseSpeed + (gameState.wave - 1) * difficulty.speedIncrease;
            
            gameState.words.forEach((wordObj, index) => {
                if (!wordObj.element) return;
                
                // Calculate new position
                const currentTop = parseFloat(wordObj.element.style.top);
                const newTop = currentTop + speed;
                wordObj.element.style.top = `${newTop}px`;
                
                // Check if word has reached the bottom
                if (newTop > gameArea.clientHeight - 30) {
                    // Word has fallen past the bottom
                    if (gameState.activeWordIndex === index) {
                        // Deselect current active word
                        gameState.activeWordIndex = -1;
                        typingInput.value = '';
                    }
                    
                    // Remove word from DOM and array
                    gameArea.removeChild(wordObj.element);
                    gameState.words.splice(index, 1);
                    gameState.totalWords++;
                    updateAccuracy();
                }
            });
            
            requestAnimationFrame(animateWords);
        }

        // Start generating words
        function startWordGenerator() {
            const wordData = gameState.wordData;
            const difficulty = gameState.difficultySettings[gameState.difficultyLevel];
            
            // Calculate word generation frequency based on wave and difficulty
            let frequency = difficulty.wordFrequency - ((gameState.wave - 1) * difficulty.wordFrequencyDecrease);
            frequency = Math.max(frequency, 500); // Don't go below 500ms
            
            gameState.wordGeneratorId = setInterval(() => {
                if (gameState.gamePaused) return;
                
                const word = getRandomWord(wordData, gameState.wave);
                const wordElement = createWordElement(word);
                
                gameState.words.push({
                    word: word,
                    element: wordElement
                });
            }, frequency);
        }

        // Update game timer
        function updateTimer() {
            let seconds = gameState.waveTime;
            
            gameState.intervalId = setInterval(() => {
                if (gameState.gamePaused) return;
                
                seconds--;
                timerDisplay.textContent = formatTime(seconds);
                waveTimerDisplay.textContent = formatTime(seconds);
                
                if (seconds <= 0) {
                    // End of wave
                    nextWave();
                }
            }, 1000);
        }

        // Move to the next wave
        function nextWave() {
            clearInterval(gameState.intervalId);
            clearInterval(gameState.wordGeneratorId);
            
            // Clear existing words
            gameState.words.forEach(wordObj => {
                if (wordObj.element && wordObj.element.parentNode) {
                    wordObj.element.parentNode.removeChild(wordObj.element);
                }
            });
            
            gameState.words = [];
            gameState.activeWordIndex = -1;
            gameState.wave++;
            
            // Update UI
            waveNumberDisplay.textContent = gameState.wave;
            
            // Reset the wave timer
            gameState.waveTime = 30;
            timerDisplay.textContent = formatTime(gameState.waveTime);
            waveTimerDisplay.textContent = formatTime(gameState.waveTime);
            
            // Start the next wave
            updateTimer();
            startWordGenerator();
        }

        // Calculate and update Words Per Minute
        function updateWPM() {
            const gameTimeMinutes = ((gameState.wave - 1) * 30 + (30 - gameState.waveTime)) / 60;
            if (gameTimeMinutes > 0) {
                gameState.wpm = Math.round(gameState.correctWords / gameTimeMinutes);
                wpmDisplay.textContent = gameState.wpm;
            }
        }

        // Update accuracy display
        function updateAccuracy() {
            if (gameState.totalWords > 0) {
                gameState.accuracy = Math.round((gameState.correctWords / gameState.totalWords) * 100);
            } else {
                gameState.accuracy = 100;
            }
            accuracyDisplay.textContent = `${gameState.accuracy}%`;
        }

        // Handle keyboard interactions
        function handleKeyboardDisplay(event) {
            const key = event.key;
            
            // Find the key element
            const keyElement = Array.from(keys).find(k => {
                const dataKey = k.getAttribute('data-key');
                return dataKey && dataKey.toLowerCase() === key.toLowerCase();
            });
            
            if (keyElement) {
                if (event.type === 'keydown') {
                    keyElement.classList.add('active');
                } else if (event.type === 'keyup') {
                    keyElement.classList.remove('active');
                }
            }
        }

        // Initialize the game
        async function initGame() {
            // Load word data
            gameState.wordData = await loadWordData();
            
            // Set up event listeners
            startBtn.addEventListener('click', startGame);
            resetBtn.addEventListener('click', resetGame);
            pauseBtn.addEventListener('click', togglePause);
            
            typingInput.addEventListener('input', handleTyping);
            
            // Set up difficulty buttons
            difficultyButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (gameState.gameActive) return; // Can't change difficulty during game
                    
                    // Update active button
                    difficultyButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Set difficulty
                    gameState.difficultyLevel = btn.getAttribute('data-data-difficulty') || 'easy';
                });
            });
            
            // Set up keyboard display
            document.addEventListener('keydown', handleKeyboardDisplay);
            document.addEventListener('keyup', handleKeyboardDisplay);
        }

        // Start the game
        function startGame() {
            if (gameState.gameActive) return;
            
            // Hide game info and show game
            gameInfo.style.display = 'none';
            
            // Reset game state
            gameState.score = 0;
            gameState.wave = 1;
            gameState.waveTime = 30;
            gameState.gameActive = true;
            gameState.gamePaused = false;
            gameState.words = [];
            gameState.activeWordIndex = -1;
            gameState.wpm = 0;
            gameState.accuracy = 100;
            gameState.correctWords = 0;
            gameState.totalWords = 0;
            
            // Update UI
            scoreDisplay.textContent = gameState.score;
            accuracyDisplay.textContent = `${gameState.accuracy}%`;
            wpmDisplay.textContent = gameState.wpm;
            waveNumberDisplay.textContent = gameState.wave;
            timerDisplay.textContent = formatTime(gameState.waveTime);
            waveTimerDisplay.textContent = formatTime(gameState.waveTime);
            
            // Enable input and buttons
            typingInput.disabled = false;
            typingInput.focus();
            resetBtn.disabled = false;
            pauseBtn.disabled = false;
            startBtn.disabled = true;
            
            // Start animations and timers
            updateTimer();
            startWordGenerator();
            animateWords();
        }

        // Reset the game
        function resetGame() {
            // Clear intervals
            clearInterval(gameState.intervalId);
            clearInterval(gameState.wordGeneratorId);
            
            // Clear words from screen
            gameState.words.forEach(wordObj => {
                if (wordObj.element && wordObj.element.parentNode) {
                    wordObj.element.parentNode.removeChild(wordObj.element);
                }
            });
            
            // Reset game state
            gameState.gameActive = false;
            gameState.gamePaused = false;
            
            // Reset UI
            gameInfo.style.display = 'block';
            typingInput.disabled = true;
            typingInput.value = '';
            resetBtn.disabled = true;
            pauseBtn.disabled = true;
            pauseBtn.textContent = 'Pause';
            startBtn.disabled = false;
        }

        // Toggle pause state
        function togglePause() {
            if (!gameState.gameActive) return;
            
            gameState.gamePaused = !gameState.gamePaused;
            
            if (gameState.gamePaused) {
                pauseBtn.textContent = 'Resume';
                typingInput.disabled = true;
                
                // Show pause message
                const pauseMsg = document.createElement('div');
                pauseMsg.className = 'game-info';
                pauseMsg.id = 'pause-msg';
                pauseMsg.innerHTML = '<h2>Game Paused</h2><p>Click Resume to continue</p>';
                gameArea.appendChild(pauseMsg);
            } else {
                pauseBtn.textContent = 'Pause';
                typingInput.disabled = false;
                typingInput.focus();
                
                // Remove pause message
                const pauseMsg = document.getElementById('pause-msg');
                if (pauseMsg) pauseMsg.remove();
            }
        }

        // Handle typing input
        function handleTyping(event) {
            const typedText = event.target.value.trim();
            
            // If no word is currently active, find one that matches the beginning of typedText
            if (gameState.activeWordIndex === -1) {
                for (let i = 0; i < gameState.words.length; i++) {
                    if (gameState.words[i].word.toLowerCase().startsWith(typedText.toLowerCase())) {
                        gameState.activeWordIndex = i;
                        gameState.words[i].element.classList.add('active');
                        break;
                    }
                }
            }
            
            // If an active word is selected
            if (gameState.activeWordIndex !== -1) {
                const activeWord = gameState.words[gameState.activeWordIndex];